import{a as _,E as T}from"./q-ZppFbWGL.js";var tt=Symbol("cache-parser");function S(e){return(typeof e=="string"||typeof e=="number")&&(e=Number(e))>=0&&e<1/0}function y(e){return e===!0||typeof e=="number"||typeof e=="string"&&e!=="false"}var b=Number;function et(e){var t=Object.defineProperty({},tt,{enumerable:!1,value:1});if(!e||typeof e!="string")return t;var r=function(u){var c={},p=u.toLowerCase().replace(/\s+/g,"").split(",");for(var m in p){var v,g=p[m].split("=",2);c[g[0]]=(v=g[1])==null||v}return c}(e),o=r["max-age"],a=r["max-stale"],n=r["min-fresh"],s=r["s-maxage"],i=r["stale-if-error"],d=r["stale-while-revalidate"];return y(r.immutable)&&(t.immutable=!0),S(o)&&(t.maxAge=b(o)),S(a)&&(t.maxStale=b(a)),S(n)&&(t.minFresh=b(n)),y(r["must-revalidate"])&&(t.mustRevalidate=!0),y(r["must-understand"])&&(t.mustUnderstand=!0),y(r["no-cache"])&&(t.noCache=!0),y(r["no-store"])&&(t.noStore=!0),y(r["no-transform"])&&(t.noTransform=!0),y(r["only-if-cached"])&&(t.onlyIfCached=!0),y(r.private)&&(t.private=!0),y(r["proxy-revalidate"])&&(t.proxyRevalidate=!0),y(r.public)&&(t.public=!0),S(s)&&(t.sMaxAge=b(s)),S(i)&&(t.staleIfError=b(i)),S(d)&&(t.staleWhileRevalidate=b(d)),t}var rt=Symbol();function at(){var e,t,r=new Promise(function(o,a){e=o,t=a});return r.resolve=e,r.reject=t,r[rt]=1,r}function nt(e,t){return e>t?1:-1}function E(e,t){var r=5381;if(typeof e=="object"&&e!==null&&(e.toString===Object.prototype.toString||e.toString===Array.prototype.toString)){t||(t=new WeakSet);for(var o=Object.keys(e).sort(nt),a=0;a<o.length;a++){var n=o[a],s=e[n];if(r=33*r^E(n,t),typeof s=="object"&&s!==null&&(e.toString===Object.prototype.toString||e.toString===Array.prototype.toString)){if(t.has(s))continue;t.add(s)}r=33*r^E(s,t)}return 33*r^E(e.constructor,t)}var i=typeof e;try{e instanceof Date?i+=e.getTime():i+=String(e)}catch{i+=String(Object.assign({},e))}for(var d=0;d<i.length;d++)r=33*r^i.charCodeAt(d);return r}/*!
 * Axios Cache Interceptor v1.3.3
 * (c) 2021-present Arthur Fiorette & Contributors
 * Released under the MIT License.
 */var x={d:(e,t)=>{for(var r in t)x.o(t,r)&&!x.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},h={};x.d(h,{h4:()=>f,UN:()=>z,uu:()=>Z,Kd:()=>M,ZF:()=>ct,nv:()=>j,p:()=>W,E7:()=>K,NQ:()=>X,xK:()=>Y,G6:()=>q,LN:()=>B,Bw:()=>I,Ad:()=>O,$k:()=>G,v8:()=>it,Jk:()=>H,tI:()=>V,iS:()=>F});const R=(e=>{var t={};return x.d(t,e),t})({parse:()=>et}),f=Object.freeze({IfModifiedSince:"if-modified-since",LastModified:"last-modified",IfNoneMatch:"if-none-match",CacheControl:"cache-control",Pragma:"pragma",ETag:"etag",Expires:"expires",Age:"age",XAxiosCacheEtag:"x-axios-cache-etag",XAxiosCacheLastModified:"x-axios-cache-last-modified",XAxiosCacheStaleIfError:"x-axios-cache-stale-if-error"}),X=e=>{if(!e)return"not enough headers";const t=e[f.CacheControl];if(t){const{noCache:o,noStore:a,maxAge:n,maxStale:s,immutable:i,staleWhileRevalidate:d}=(0,R.parse)(String(t));if(o||a)return"dont cache";if(i)return{cache:31536e6};if(n!==void 0){const u=e[f.Age];return{cache:u?1e3*(n-Number(u)):1e3*n,stale:s!==void 0?1e3*s:d!==void 0?1e3*d:void 0}}}const r=e[f.Expires];if(r){const o=Date.parse(String(r))-Date.now();return o>=0?{cache:o}:"dont cache"}return"not enough headers"},ot=(e=>{var t={};return x.d(t,e),t})({deferred:()=>at});function K(e){return e?t=>e(t)||t===304:t=>t>=200&&t<300||t===304}function O(e="get",t=[]){return e=e.toLowerCase(),t.some(r=>r===e)}function F(e,t){var r;t.headers||(t.headers={});const{etag:o,modifiedSince:a}=t.cache;if(o){const n=o===!0?(r=e.data)===null||r===void 0?void 0:r.headers[f.ETag]:o;n&&(t.headers[f.IfNoneMatch]=n)}a&&(t.headers[f.IfModifiedSince]=a===!0?e.data.headers[f.LastModified]||new Date(e.createdAt).toUTCString():a.toUTCString())}function W(e,t){return e.status===304&&t?(e.cached=!0,e.data=t.data,e.status=t.status,e.statusText=t.statusText,e.headers=Object.assign(Object.assign({},t.headers),e.headers),t):{data:e.data,status:e.status,statusText:e.statusText,headers:e.headers}}function q(e){const t=async r=>{var o,a,n,s,i,d,u,c,p,m,v,g,k,P,$;if(r.id=e.generateKey(r),r.cache===!1||(r.cache=Object.assign(Object.assign({},e.defaults.cache),r.cache),r.cache.cacheTakeover&&((o=(m=r.headers)[v=f.CacheControl])!==null&&o!==void 0||(m[v]="no-cache"),(a=(g=r.headers)[k=f.Pragma])!==null&&a!==void 0||(g[k]="no-cache"),(n=(P=r.headers)[$=f.Expires])!==null&&n!==void 0||(P[$]="0")),!O(r.method,r.cache.methods)))return r;let l=await e.storage.get(r.id,r);const C=r.cache.override;t:if(l.state==="empty"||l.state==="stale"||C){if(e.waiting[r.id]&&!C&&(l=await e.storage.get(r.id,r),l.state!=="empty"))break t;return e.waiting[r.id]=(0,ot.deferred)(),e.waiting[r.id].catch(()=>{}),await e.storage.set(r.id,{state:"loading",previous:C?l.data?"stale":"empty":l.state,data:l.data,createdAt:C&&!l.createdAt?Date.now():l.createdAt},r),l.state==="stale"&&F(l,r),r.validateStatus=K(r.validateStatus),(l.state==="stale"||l.data)&&await((i=(s=r.cache).hydrate)===null||i===void 0?void 0:i.call(s,l)),r}let w;if(l.state==="loading"){const D=e.waiting[r.id];if(!D)return l.data&&await((u=(d=r.cache).hydrate)===null||u===void 0?void 0:u.call(d,l)),r;try{w=await D}catch{return l.data&&await((p=(c=r.cache).hydrate)===null||p===void 0?void 0:p.call(c,l)),t(r)}}else w=l.data;return r.adapter=function(){return Promise.resolve({config:r,data:w.data,headers:w.headers,status:w.status,statusText:w.statusText,cached:!0,id:r.id})},r};return{onFulfilled:t,apply:()=>e.interceptors.request.use(t)}}async function H(e,t){var r;if(typeof t=="function")return t(e);const{statusCheck:o,responseMatch:a,containsHeaders:n}=t;if(o&&!await o(e.status)||a&&!await a(e))return!1;if(n){for(const[s,i]of Object.entries(n))if(!await i((r=e.headers[s.toLowerCase()])!==null&&r!==void 0?r:e.headers[s]))return!1}return!0}async function V(e,t,r){if(typeof r=="function")return r(t);for(const[o,a]of Object.entries(r)){if(a==="delete"){await e.remove(o,t.config);continue}const n=await e.get(o,t.config);if(n.state==="loading")continue;const s=await a(n,t);s!=="delete"?s!=="ignore"&&await e.set(o,s,t.config):await e.remove(o,t.config)}}function B(e){const t=async(a,n)=>{var s;await e.storage.remove(a,n),(s=e.waiting[a])===null||s===void 0||s.reject(),delete e.waiting[a]},r=async a=>{var n;if(!(a!=null&&a.config))throw a;a.id=a.config.id,(n=a.cached)!==null&&n!==void 0||(a.cached=!1);const s=a.config,i=s.cache;if(a.cached)return a;if(!i)return a.cached=!1,a;if(i.update&&await V(e.storage,a,i.update),!O(s.method,i.methods))return a;const d=await e.storage.get(a.id,s);if(d.state!=="loading")return a;if(!d.data&&!await H(a,i.cachePredicate))return await t(a.id,s),a;for(const g of Object.keys(a.headers))g.startsWith("x-axios-cache")&&delete a.headers[g];i.etag&&i.etag!==!0&&(a.headers[f.XAxiosCacheEtag]=i.etag),i.modifiedSince&&(a.headers[f.XAxiosCacheLastModified]=i.modifiedSince===!0?"use-cache-timestamp":i.modifiedSince.toUTCString());let u,c=i.ttl||-1;if(i.interpretHeader){const g=e.headerInterpreter(a.headers);if(g==="dont cache")return await t(a.id,s),a;g!=="not enough headers"&&(typeof g=="number"?c=g:(c=g.cache,u=g.stale))}const p=W(a,d.data);typeof c=="function"&&(c=await c(a)),i.staleIfError&&(a.headers[f.XAxiosCacheStaleIfError]=String(c));const m={state:"cached",ttl:c,staleTtl:u,createdAt:Date.now(),data:p},v=e.waiting[a.id];return v&&(v.resolve(m.data),delete e.waiting[a.id]),await e.storage.set(a.id,m,s),a},o=async a=>{var n;if(!a.isAxiosError||!a.config)throw a;const s=a.config,i=s.id,d=s.cache,u=a.response;if(!d||!i)throw a;if(!O(s.method,d.methods))throw await t(i,s),a;const c=await e.storage.get(i,s);if(c.state!=="loading"||c.previous!=="stale")throw await t(i,s),a;if(d.staleIfError){const p=String(u==null?void 0:u.headers[f.CacheControl]),m=p&&(0,R.parse)(p).staleIfError,v=typeof d.staleIfError=="function"?await d.staleIfError(u,c,a):d.staleIfError===!0&&m?1e3*m:d.staleIfError;if(v===!0||typeof v=="number"&&c.createdAt+v>Date.now())return(n=e.waiting[i])===null||n===void 0||n.resolve(c.data),delete e.waiting[i],await e.storage.set(i,{state:"stale",createdAt:Date.now(),data:c.data},s),{cached:!0,config:s,id:i,data:c.data.data,headers:c.data.headers,status:c.data.status,statusText:c.data.statusText}}throw await t(i,s),a};return{onFulfilled:r,onRejected:o,apply:()=>e.interceptors.response.use(r,o)}}const G=e=>!!e&&!!e["is-storage"];function Q(e){const t=e.data.headers;return f.ETag in t||f.LastModified in t||f.XAxiosCacheEtag in t||f.XAxiosCacheLastModified in t}function j(e){return!String(e.data.headers[f.CacheControl]).includes("must-revalidate")&&(!!Q(e)||e.state==="cached"&&e.staleTtl!==void 0&&Math.abs(Date.now()-(e.createdAt+e.ttl))<=e.staleTtl)}function I(e){return e.ttl!==void 0&&e.createdAt+e.ttl<=Date.now()}function M({set:e,find:t,remove:r}){return{"is-storage":1,set:e,remove:r,get:async(o,a)=>{let n=await t(o,a);if(!n)return{state:"empty"};if(n.state==="empty"||n.state==="loading")return n;if(n.state==="cached"){if(!I(n))return n;if(!j(n))return await r(o,a),{state:"empty"};n={state:"stale",createdAt:n.createdAt,data:n.data,ttl:n.staleTtl!==void 0?n.staleTtl+n.ttl:void 0},await e(o,n,a)}return I(n)?Q(n)?n:(await r(o,a),{state:"empty"}):n}}}function Z(e=!1,t=!1,r=!1){const o=M({set:(a,n)=>{if(r){let s=Object.keys(o.data);if(s.length>=r)for(o.cleanup(),s=Object.keys(o.data);s.length>=r;)delete o.data[s.shift()]}o.data[a]=e==="double"?typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)):n},remove:a=>{delete o.data[a]},find:a=>{const n=o.data[a];return e&&n!==void 0?typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)):n}});return o.data=Object.create(null),o.cleanup=()=>{const a=Object.keys(o.data);let n,s,i=-1;for(;++i<a.length;)s=a[i],n=o.data[s],n.state!=="empty"?n.state==="cached"&&I(n)&&!j(n)&&o.remove(s):o.remove(s)},t&&(o.cleaner=setInterval(o.cleanup,t)),o}const st=(e=>{var t={};return x.d(t,e),t})({hash:()=>E}),U=/^\/|\/$/g;function z(e){return t=>{if(t.id)return t.id;const r=e(t);return typeof r=="string"||typeof r=="number"?`${r}`:`${(0,st.hash)(r)}`}}const Y=z(({baseURL:e,url:t,method:r,params:o,data:a})=>(e=e!==void 0?e.replace(U,""):"",t=t!==void 0?t.replace(U,""):"",{url:e+(e&&t?"/":"")+t,params:o,method:r=r!==void 0?r.toLowerCase():"get",data:a}));function it(e,t={}){var r,o,a,n,s,i,d,u;const c=e;if(c.defaults.cache)throw new Error("setupCache() should be called only once");if(c.storage=t.storage||Z(),!G(c.storage))throw new Error("Use buildStorage() function");return c.waiting=t.waiting||{},c.generateKey=t.generateKey||Y,c.headerInterpreter=t.headerInterpreter||X,c.requestInterceptor=t.requestInterceptor||q(c),c.responseInterceptor=t.responseInterceptor||B(c),c.debug=t.debug||function(){},c.defaults.cache={update:t.update||{},ttl:(r=t.ttl)!==null&&r!==void 0?r:3e5,methods:t.methods||["get","head"],cachePredicate:t.cachePredicate||{statusCheck:p=>[200,203,300,301,302,404,405,410,414,501].includes(p)},etag:(o=t.etag)===null||o===void 0||o,modifiedSince:(a=t.modifiedSince)!==null&&a!==void 0?a:t.etag===!1,interpretHeader:(n=t.interpretHeader)===null||n===void 0||n,cacheTakeover:(s=t.cacheTakeover)===null||s===void 0||s,staleIfError:(i=t.staleIfError)===null||i===void 0||i,override:(d=t.override)!==null&&d!==void 0&&d,hydrate:(u=t.hydrate)!==null&&u!==void 0?u:void 0},c.requestInterceptor.apply(),c.responseInterceptor.apply(),c}function ct(e,t="axios-cache-"){return M({find:r=>{const o=e.getItem(t+r);return o?JSON.parse(o):void 0},remove:r=>{e.removeItem(t+r)},set:(r,o)=>{const a=()=>e.setItem(t+r,JSON.stringify(o));try{return a()}catch{const s=Object.entries(e).filter(i=>i[0].startsWith(t)).map(i=>[i[0],JSON.parse(i[1])]);for(const i of s)i[1].state==="cached"&&I(i[1])&&!j(i[1])&&e.removeItem(i[0]);try{return a()}catch{const d=s.sort((u,c)=>(u[1].createdAt||0)-(c[1].createdAt||0));for(const u of d){e.removeItem(u[0]);try{return a()}catch{}}}e.removeItem(t+r)}}})}h.h4;h.UN;h.uu;h.Kd;h.ZF;h.nv;h.p;h.E7;h.NQ;h.xK;h.G6;h.LN;h.Bw;h.Ad;h.$k;var dt=h.v8;h.Jk;h.tI;h.iS;const ut=_.create(),N=dt(ut),L={cache:{ttl:"1000 * 60",interpretHeader:!1,staleIfError:!1}},A=async()=>{const e=T.STATUS;try{const t=await N.get(e,{...L,validateStatus:()=>!0});if(t.status==200)return t.data}catch(t){console.error(t)}},lt=async()=>{const e=T.VERSION;try{return(await N.get(e,L)).data.version}catch(t){console.error(t)}},ft=async()=>{const e=T.STORE+"status";try{return(await N.get(e,L)).data.enabled==!0}catch(t){console.error(t)}return!1},ht=async()=>{const e=T.PARSEMULTI;try{const t=await N.get(e,{...L,validateStatus:()=>!0});return t.status!==404&&t.status<500}catch{return!1}};let J;(function(e){e.getVersion=async()=>{const t=await A();return t!=null?t.version:await lt()},e.isStoreSuported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/store/list"):await ft()},e.isMultiSupported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/parse/multi"):await ht()},e.isMultiPartSupported=async()=>{const t=await A();return t!=null?t.endpoints.includes("/parse/multiPart"):!1}})(J||(J={}));export{J as S};
