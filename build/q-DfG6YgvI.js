function P(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var D={},W={};(function(n){n.__esModule=!0,n.default=T;var g=/[\u0300-\u036f]/g,h=/ł/g,y=/ñ/g;function T(o){return o.toLowerCase().normalize("NFD").replace(g,"").replace(h,"l").replace(y,"n").trim()}})(W);var S={},C;function q(){if(C)return S;C=1,S.__esModule=!0,S.aggressiveFuzzyMatch=R,S.createFuzzySearchImpl=B,S.experimentalSmartFuzzyMatch=k,S.fuzzyMatchImpl=A;var n=g(W);function g(e){return e&&e.__esModule?e:{default:e}}var h=Number.MAX_SAFE_INTEGER,y=function(r,c){return r.score-c.score},T=function(r,c){return r[0]-c[0]},o=new Set(`  []()-–—'"“”`.split(""));function M(e){return o.has(e)}function O(e,r,c,v,t,f,u){if(e===v)return[0,[[0,e.length-1]]];var a=v.length,s=r.length,i=t.length;if(r===t)return[.1,[[0,s-1]]];if(r.startsWith(t))return[.5,[[0,i-1]]];var p=e.indexOf(v);if(p>-1&&M(e[p-1]))return[.9,[[p,p+a-1]]];var l=r.indexOf(t);if(l>-1&&M(r[l-1]))return[1,[[l,l+a-1]]];var d=f.length;if(d>1&&f.every(function(F){return c.has(F)})){var z=1.5+d*.2;return[z,f.map(function(F){var _=r.indexOf(F);return[_,_+F.length-1]}).sort(T)]}return l>-1?[2,[[l,l+a-1]]]:u==="aggressive"?R(r,t):u==="smart"?k(r,t):null}function R(e,r){for(var c=e.length,v=r.length,t=0,f=r[t],u=[],a=-1,s=-2,i=0;i<c;i+=1)if(e[i]===f){if(i!==s+1&&(a>=0&&u.push([a,s]),a=i),s=i,t+=1,t===v)return u.push([a,s]),w(u,e);f=r[t]}return null}function k(e,r){for(var c=e.length,v=[],t=0,f=r[t],u=-1,a=-2;;){var s=e.indexOf(f,a+1);if(s===-1)break;if(s===0||M(e[s-1]))u=s;else{var i=r.length-t,p=e.length-s,l=Math.min(3,i,p),d=r.slice(t,t+l);if(e.slice(s,s+l)===d)u=s;else{a+=1;continue}}for(a=u;a<c&&e[a]===f;a+=1)t+=1,f=r[t];if(a-=1,v.push([u,a]),t===r.length)return w(v,e)}return null}function w(e,r){var c=2;return e.forEach(function(v){var t=v[0],f=v[1],u=f-t+1,a=t===0||r[t]===" "||r[t-1]===" ",s=f===r.length-1||r[f]===" "||r[f+1]===" ",i=a&&s;i?c+=.2:a?c+=.4:u>=3?c+=.8:c+=1.6}),[c,e]}function A(e,r){var c=(0,n.default)(r),v=c.split(" "),t=(0,n.default)(e),f=new Set(t.split(" ")),u=O(e,t,f,r,c,v,"smart");return u?{item:e,score:u[0],matches:[u[1]]}:null}function B(e,r){var c=r.strategy,v=c===void 0?"aggressive":c,t=r.getText,f=e.map(function(u){var a;if(t)a=t(u);else{var s=r.key?u[r.key]:u;a=[s]}var i=a.map(function(p){var l=p||"",d=(0,n.default)(l),z=new Set(d.split(" "));return[l,d,z]});return[u,i]});return function(u){var a=[],s=(0,n.default)(u),i=s.split(" ");return s.length?(f.forEach(function(p){for(var l=p[0],d=p[1],z=h,F=[],_=0,N=d.length;_<N;_+=1){var L=d[_],G=L[0],X=L[1],I=L[2],E=O(G,X,I,u,s,i,v);E?(z=Math.min(z,E[0]),F.push(E[1])):F.push(null)}z<h&&a.push({item:l,score:z,matches:F})}),a.sort(y),a):[]}}return S}(function(n){n.__esModule=!0,n.default=y,n.fuzzyMatch=T;var g=h(W);n.normalizeText=g.default;function h(o){return o&&o.__esModule?o:{default:o}}function y(o,M){return M===void 0&&(M={}),q().createFuzzySearchImpl(o,M)}function T(o,M){return q().fuzzyMatchImpl(o,M)}})(D);const V=P(D),x={},H=(n,g)=>g.map(h=>h!="timestamp"?n[h]:new Date(n.timestamp).toLocaleString().replace(", "," ")),J=(n,g,h)=>{x[n]=V(h,{getText:y=>H(y,g)})},K=(n,g)=>{var h;return((h=x[n])==null?void 0:h.call(x,g).map(y=>y.item.id))??[]};export{J as i,K as s};
