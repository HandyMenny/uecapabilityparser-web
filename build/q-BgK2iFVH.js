import{w as m,x as v,y as E}from"./q-CNKChEG2.js";import{u as _,C as p,b as g,j as k,d as b,A as h,k as A,_ as D,f as S,g as P,q as i,S as T,h as $}from"./q-CqQeKCeh.js";import{_ as r}from"./q-C7i0xNVT.js";const C=m,L=async function({track:t,cleanup:l}){var s,d;const[a,o,n,u]=_(),f=t(()=>u.value);if(!o.value)return;const y=await a.trapFocus(o.value);if(f){const w=window.requestAnimationFrame;window.requestAnimationFrame=()=>42,await a.showModal(o.value),window.requestAnimationFrame=w,await((s=n.onShow$)==null?void 0:s.call(n)),a.activateFocusTrap(y)}else await a.closeModal(o.value),await((d=n.onClose$)==null?void 0:d.call(n));l(async()=>{await a.deactivateFocusTrap(y)})},M=async e=>{const[t,l,a,o]=_();a.alert===!0||a.closeOnBackdropClick===!1||e.target instanceof HTMLDialogElement&&await t.wasModalBackdropClicked(l.value,e)&&(o.value=!1)},O=e=>{const[t]=_();e.key==="Escape"&&(t.value=!1,e.stopPropagation())},x=async e=>{const[t]=_();e.stopPropagation(),await t(e)},q=e=>{p(i(()=>r(()=>Promise.resolve().then(()=>c),void 0),"s_6kc6yEJKobw"));const t=E(),l=g(),a=k(),{"bind:show":o}=e;b(i(()=>r(()=>Promise.resolve().then(()=>c),void 0),"s_boBpVEMpnGQ",[t,l,e,o]));const n=i(()=>r(()=>Promise.resolve().then(()=>c),void 0),"s_qbpjydAbzcE",[t,l,e,o]),u=h(s=>{const d=[" ","Enter"];s.target instanceof HTMLDialogElement&&d.includes(s.key)&&s.preventDefault(),s.key==="Escape"&&s.preventDefault()},'e=>{const keys=[" ","Enter"];if(e.target instanceof HTMLDialogElement&&keys.includes(e.key)){e.preventDefault();}if(e.key==="Escape"){e.preventDefault();}}'),f=i(()=>r(()=>Promise.resolve().then(()=>c),void 0),"s_LXwFUUWCA2U",[o]);return A(v,{localId:a}),D("dialog",{...e,children:P(T,null,3,"9p_0"),"data-closed":!o.value&&"","data-open":o.value&&"","data-state":o.value?"open":"closed",onClick$:i(()=>r(()=>Promise.resolve().then(()=>c),void 0),"s_rnAxN4ftyEs",[n]),onKeyDown$:[u,f,e.onKeyDown$],ref:l},{"aria-describedby":`${a}-description`,"aria-labelledby":`${a}-title`,id:`${a}-root`,role:S(s=>s.alert===!0?"alertdialog":"dialog",[e],'p0.alert===true?"alertdialog":"dialog"')},0,"9p_1")},c=Object.freeze(Object.defineProperty({__proto__:null,_hW:$,s_6kc6yEJKobw:C,s_LXwFUUWCA2U:O,s_VXOY7yQNLIw:q,s_boBpVEMpnGQ:L,s_qbpjydAbzcE:M,s_rnAxN4ftyEs:x},Symbol.toStringTag,{value:"Module"}));export{$ as _hW,C as s_6kc6yEJKobw,O as s_LXwFUUWCA2U,q as s_VXOY7yQNLIw,L as s_boBpVEMpnGQ,M as s_qbpjydAbzcE,x as s_rnAxN4ftyEs};
